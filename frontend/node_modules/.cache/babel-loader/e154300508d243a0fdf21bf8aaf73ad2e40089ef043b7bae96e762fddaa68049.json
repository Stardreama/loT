{"ast":null,"code":"let socket;\nexport const createWebSocketConnection = onMessage => {\n  if (!socket || socket.readyState !== WebSocket.OPEN) {\n    socket = new WebSocket('ws://localhost:5000'); // 连接到 WebSocket 服务器\n\n    socket.onopen = () => {\n      console.log('Connected to WebSocket server');\n      socket.send('Hello from the client!');\n    };\n    socket.onmessage = event => {\n      console.log(`Message from server: ${event.data}`);\n      if (onMessage) onMessage(JSON.parse(event.data)); // 解析消息并传给回调函数\n    };\n    socket.onclose = () => {\n      console.log('WebSocket connection closed');\n    };\n  }\n};\nexport const closeWebSocketConnection = () => {\n  if (socket && socket.readyState === WebSocket.OPEN) {\n    socket.close();\n  }\n};","map":{"version":3,"names":["socket","createWebSocketConnection","onMessage","readyState","WebSocket","OPEN","onopen","console","log","send","onmessage","event","data","JSON","parse","onclose","closeWebSocketConnection","close"],"sources":["D:/code/vscode/React/loT/frontend/src/services/webSocketService.js"],"sourcesContent":["let socket;\r\n\r\nexport const createWebSocketConnection = (onMessage) => {\r\n    if (!socket || socket.readyState !== WebSocket.OPEN) {\r\n        socket = new WebSocket('ws://localhost:5000');  // 连接到 WebSocket 服务器\r\n\r\n        socket.onopen = () => {\r\n            console.log('Connected to WebSocket server');\r\n            socket.send('Hello from the client!');\r\n        };\r\n\r\n        socket.onmessage = (event) => {\r\n            console.log(`Message from server: ${event.data}`);\r\n            if (onMessage) onMessage(JSON.parse(event.data));  // 解析消息并传给回调函数\r\n        };\r\n        socket.onclose = () => {\r\n            console.log('WebSocket connection closed');\r\n        };\r\n    }\r\n};\r\n\r\nexport const closeWebSocketConnection = () => {\r\n    if (socket && socket.readyState === WebSocket.OPEN) {\r\n        socket.close();\r\n    }\r\n};\r\n"],"mappings":"AAAA,IAAIA,MAAM;AAEV,OAAO,MAAMC,yBAAyB,GAAIC,SAAS,IAAK;EACpD,IAAI,CAACF,MAAM,IAAIA,MAAM,CAACG,UAAU,KAAKC,SAAS,CAACC,IAAI,EAAE;IACjDL,MAAM,GAAG,IAAII,SAAS,CAAC,qBAAqB,CAAC,CAAC,CAAE;;IAEhDJ,MAAM,CAACM,MAAM,GAAG,MAAM;MAClBC,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;MAC5CR,MAAM,CAACS,IAAI,CAAC,wBAAwB,CAAC;IACzC,CAAC;IAEDT,MAAM,CAACU,SAAS,GAAIC,KAAK,IAAK;MAC1BJ,OAAO,CAACC,GAAG,CAAC,wBAAwBG,KAAK,CAACC,IAAI,EAAE,CAAC;MACjD,IAAIV,SAAS,EAAEA,SAAS,CAACW,IAAI,CAACC,KAAK,CAACH,KAAK,CAACC,IAAI,CAAC,CAAC,CAAC,CAAE;IACvD,CAAC;IACDZ,MAAM,CAACe,OAAO,GAAG,MAAM;MACnBR,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;IAC9C,CAAC;EACL;AACJ,CAAC;AAED,OAAO,MAAMQ,wBAAwB,GAAGA,CAAA,KAAM;EAC1C,IAAIhB,MAAM,IAAIA,MAAM,CAACG,UAAU,KAAKC,SAAS,CAACC,IAAI,EAAE;IAChDL,MAAM,CAACiB,KAAK,CAAC,CAAC;EAClB;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}