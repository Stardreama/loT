{"ast":null,"code":"import mqtt from 'mqtt';\nconst brokerUrl = 'ws://172.6.0.240:8083/mqtt'; // 确保 MQTT Broker 支持 WebSocket\n\nconst client = mqtt.connect(brokerUrl);\nclient.on('connect', () => {\n  console.log('Connected to MQTT Broker');\n  client.subscribe('sensor/data', err => {\n    if (!err) {\n      console.log('Subscribed to sensor/data');\n    }\n  });\n});\nconst subscribeSensor = callback => {\n  client.on('message', (topic, message) => {\n    if (topic === 'sensor/data') {\n      callback(message.toString());\n    }\n  });\n};\nconst publishControl = action => {\n  client.publish('control/movement', action);\n};\nexport { subscribeSensor, publishControl };","map":{"version":3,"names":["mqtt","brokerUrl","client","connect","on","console","log","subscribe","err","subscribeSensor","callback","topic","message","toString","publishControl","action","publish"],"sources":["D:/code/vscode/React/loT/frontend/src/services/mqttService.js"],"sourcesContent":["import mqtt from 'mqtt';\r\n\r\nconst brokerUrl = 'ws://172.6.0.240:8083/mqtt'; // 确保 MQTT Broker 支持 WebSocket\r\n\r\nconst client = mqtt.connect(brokerUrl);\r\n\r\nclient.on('connect', () => {\r\n    console.log('Connected to MQTT Broker');\r\n    client.subscribe('sensor/data', (err) => {\r\n        if (!err) {\r\n            console.log('Subscribed to sensor/data');\r\n        }\r\n    });\r\n});\r\n\r\nconst subscribeSensor = (callback) => {\r\n    client.on('message', (topic, message) => {\r\n        if (topic === 'sensor/data') {\r\n            callback(message.toString());\r\n        }\r\n    });\r\n};\r\n\r\nconst publishControl = (action) => {\r\n    client.publish('control/movement', action);\r\n};\r\n\r\nexport { subscribeSensor, publishControl };\r\n\r\n"],"mappings":"AAAA,OAAOA,IAAI,MAAM,MAAM;AAEvB,MAAMC,SAAS,GAAG,4BAA4B,CAAC,CAAC;;AAEhD,MAAMC,MAAM,GAAGF,IAAI,CAACG,OAAO,CAACF,SAAS,CAAC;AAEtCC,MAAM,CAACE,EAAE,CAAC,SAAS,EAAE,MAAM;EACvBC,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;EACvCJ,MAAM,CAACK,SAAS,CAAC,aAAa,EAAGC,GAAG,IAAK;IACrC,IAAI,CAACA,GAAG,EAAE;MACNH,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;IAC5C;EACJ,CAAC,CAAC;AACN,CAAC,CAAC;AAEF,MAAMG,eAAe,GAAIC,QAAQ,IAAK;EAClCR,MAAM,CAACE,EAAE,CAAC,SAAS,EAAE,CAACO,KAAK,EAAEC,OAAO,KAAK;IACrC,IAAID,KAAK,KAAK,aAAa,EAAE;MACzBD,QAAQ,CAACE,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC;IAChC;EACJ,CAAC,CAAC;AACN,CAAC;AAED,MAAMC,cAAc,GAAIC,MAAM,IAAK;EAC/Bb,MAAM,CAACc,OAAO,CAAC,kBAAkB,EAAED,MAAM,CAAC;AAC9C,CAAC;AAED,SAASN,eAAe,EAAEK,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}